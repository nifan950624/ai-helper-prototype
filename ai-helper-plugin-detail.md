# AI Helper VS Code æ’ä»¶ - è¯¦ç»†æŠ€æœ¯æ–¹æ¡ˆ

## ä¸€ã€æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              VS Code æ’ä»¶                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   éœ€æ±‚ç®¡ç†    â”‚  â”‚   ä»»åŠ¡ç®¡ç†    â”‚  â”‚   ä»£ç è¾…åŠ©    â”‚  â”‚   æŠ¥é”™æ²»ç†    â”‚   â”‚
â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚  â”‚   Module     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                 â”‚                 â”‚                 â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                    â”‚                                       â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                          â”‚   Context Engine   â”‚                            â”‚
â”‚                          â”‚   (ä¸Šä¸‹æ–‡å¼•æ“)      â”‚                            â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                    â”‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   TAPD API      â”‚    â”‚   Model Service    â”‚    â”‚   Knowledge     â”‚      â”‚
â”‚  â”‚   Service       â”‚â—„â”€â”€â”€â”¤   (æ¨¡å‹æœåŠ¡å±‚)      â”œâ”€â”€â”€â–ºâ”‚   Base API      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€UI åŸå‹è®¾è®¡

### 2.1 ä¾§è¾¹æ ä¸»è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI Helper                     [âš™ï¸]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“‹ å½“å‰éœ€æ±‚                          â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚ #12345 é¢„çº¦å•æ”¯æŒé¢„ä»˜åŠŸèƒ½             â”‚â”‚
â”‚  â”‚ çŠ¶æ€: å¼€å‘ä¸­  ä¼˜å…ˆçº§: P1              â”‚â”‚
â”‚  â”‚                                      â”‚â”‚
â”‚  â”‚ [è§£æéœ€æ±‚] [ä»»åŠ¡æ‹†è§£] [éªŒæ”¶æ¸…å•]       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“ ä»»åŠ¡åˆ—è¡¨                    [+]   â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚ â—‹ T1: é¢„ä»˜å¼¹çª— UI æ”¹é€         [å¾…å¼€å§‹]â”‚â”‚
â”‚  â”‚ â— T2: å¾®ä¿¡æ”¯ä»˜æ¥å£å¯¹æ¥        [å¼€å‘ä¸­]â”‚â”‚
â”‚  â”‚ â—‹ T3: åŸ‹ç‚¹ç»Ÿè®¡å®ç°            [å¾…å¼€å§‹]â”‚â”‚
â”‚  â”‚ âœ“ T4: å¼‚å¸¸è¾¹ç•Œå¤„ç†            [å·²å®Œæˆ]â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ”§ å¿«æ·æ“ä½œ                          â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚ [ç”Ÿæˆä»£ç ] [ä»£ç æ£€æŸ¥] [åˆ†ææŠ¥é”™]      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 éœ€æ±‚ç»‘å®šå¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»‘å®š TAPD éœ€æ±‚                                   [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  è¯·è¾“å…¥ TAPD éœ€æ±‚é“¾æ¥æˆ– ID:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ https://tapd.woa.com/xxx/prong/stories/view/... â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æˆ–æ‰‹åŠ¨å¡«å†™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚                                                       â”‚
â”‚  éœ€æ±‚æ ‡é¢˜:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ é¢„çº¦å•æ”¯æŒé¢„ä»˜åŠŸèƒ½                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  éœ€æ±‚æè¿°:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. ç”¨æˆ·åœ¨é¢„çº¦å•è¯¦æƒ…é¡µå¯ä»¥é€‰æ‹©é¢„ä»˜                â”‚ â”‚
â”‚  â”‚ 2. æ”¯æŒå¾®ä¿¡æ”¯ä»˜å’Œä½™é¢æ”¯ä»˜                        â”‚ â”‚
â”‚  â”‚ 3. é¢„ä»˜æˆåŠŸåæ˜¾ç¤ºé¢„ä»˜æ ‡è®°                        â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  éªŒæ”¶æ ‡å‡†:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. é¢„ä»˜æµç¨‹å®Œæ•´å¯ç”¨                              â”‚ â”‚
â”‚  â”‚ 2. å¼‚å¸¸æƒ…å†µæœ‰å…œåº•æç¤º                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚                              [å–æ¶ˆ]  [ç¡®è®¤ç»‘å®š]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ç»“æ„åŒ–éœ€æ±‚å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ç»“æ„åŒ–éœ€æ±‚                               [ç¼–è¾‘]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  ğŸ“Œ ä¸šåŠ¡èƒŒæ™¯                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å½“å‰é¢„çº¦å•ä¸æ”¯æŒé¢„ä»˜ï¼Œç”¨æˆ·éœ€è¦è¡Œç¨‹ç»“æŸåæ‰èƒ½     â”‚ â”‚
â”‚  â”‚ ä»˜æ¬¾ï¼Œå­˜åœ¨é€ƒå•é£é™©ï¼Œéœ€è¦å¢åŠ é¢„ä»˜èƒ½åŠ›é™ä½é£é™©ã€‚   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  ğŸ¯ ä¸šåŠ¡ç›®æ ‡                                          â”‚
â”‚  â€¢ é™ä½é¢„çº¦å•é€ƒå•ç‡ 30%                               â”‚
â”‚  â€¢ æå‡ç”¨æˆ·æ”¯ä»˜ä½“éªŒ                                   â”‚
â”‚                                                       â”‚
â”‚  ğŸ“ åŠŸèƒ½ç‚¹åˆ—è¡¨                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. é¢„ä»˜å…¥å£å±•ç¤º                                  â”‚ â”‚
â”‚  â”‚    - é¢„çº¦å•è¯¦æƒ…é¡µå¢åŠ ã€Œç«‹å³é¢„ä»˜ã€æŒ‰é’®            â”‚ â”‚
â”‚  â”‚    - æŒ‰é’®åœ¨è®¢å•çŠ¶æ€ä¸ºã€Œå¾…å‡ºå‘ã€æ—¶å±•ç¤º            â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â”‚ 2. é¢„ä»˜å¼¹çª—                                      â”‚ â”‚
â”‚  â”‚    - å±•ç¤ºé¢„ä¼°é‡‘é¢                                â”‚ â”‚
â”‚  â”‚    - æ”¯æŒå¾®ä¿¡æ”¯ä»˜ / ä½™é¢æ”¯ä»˜                     â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â”‚ 3. é¢„ä»˜çŠ¶æ€å±•ç¤º                                  â”‚ â”‚
â”‚  â”‚    - é¢„ä»˜æˆåŠŸåè®¢å•å¡ç‰‡å¢åŠ ã€Œå·²é¢„ä»˜ã€æ ‡ç­¾        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  âš ï¸ è¾¹ç•Œä¸å¼‚å¸¸                                        â”‚
â”‚  â€¢ æ”¯ä»˜å¤±è´¥ï¼šå¼¹çª—æç¤ºï¼Œå¯é‡è¯•                         â”‚
â”‚  â€¢ é‡‘é¢å˜åŒ–ï¼šé¢„ä»˜åå®é™…é‡‘é¢å˜åŒ–éœ€è¡¥å·®ä»·               â”‚
â”‚  â€¢ å–æ¶ˆè®¢å•ï¼šé¢„ä»˜é‡‘é¢åŸè·¯é€€å›                         â”‚
â”‚                                                       â”‚
â”‚  âœ… éªŒæ”¶æ ‡å‡†                                          â”‚
â”‚  â–¡ é¢„ä»˜æµç¨‹ç«¯åˆ°ç«¯å¯ç”¨                                 â”‚
â”‚  â–¡ å¼‚å¸¸åœºæ™¯æœ‰å…œåº•                                     â”‚
â”‚  â–¡ åŸ‹ç‚¹æ•°æ®æ­£ç¡®ä¸ŠæŠ¥                                   â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ä»»åŠ¡è¯¦æƒ…é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ T2: å¾®ä¿¡æ”¯ä»˜æ¥å£å¯¹æ¥                      [å¼€å‘ä¸­]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  ğŸ“„ ä»»åŠ¡æè¿°                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¯¹æ¥å¾®ä¿¡æ”¯ä»˜ JSAPIï¼Œå®ç°é¢„çº¦å•é¢„ä»˜åŠŸèƒ½           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  ğŸ“‹ éœ€æ±‚èƒŒæ™¯                                          â”‚
â”‚  æ¥è‡ªéœ€æ±‚ #12345ï¼šé¢„çº¦å•æ”¯æŒé¢„ä»˜åŠŸèƒ½                  â”‚
â”‚                                                       â”‚
â”‚  âœ… éªŒæ”¶ç‚¹                                            â”‚
â”‚  â–¡ è°ƒèµ·å¾®ä¿¡æ”¯ä»˜æˆåŠŸ                                   â”‚
â”‚  â–¡ æ”¯ä»˜ç»“æœå›è°ƒæ­£ç¡®å¤„ç†                               â”‚
â”‚  â–¡ æ”¯ä»˜å¤±è´¥æœ‰é‡è¯•æœºåˆ¶                                 â”‚
â”‚                                                       â”‚
â”‚  ğŸ’¡ ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œå°†ä»»åŠ¡ä¿¡æ¯ä¼ é€’ç»™ AI æ’ä»¶            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  [ğŸš€ è°ƒç”¨ AI ç”Ÿæˆ]  [ğŸ” ä»£ç æ£€æŸ¥]                â”‚ â”‚
â”‚  â”‚  ä½¿ç”¨: CodeBuddy â–¾                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  [âœ“ æ ‡è®°å®Œæˆ]                                        â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **å˜æ›´è¯´æ˜**ï¼šç§»é™¤äº†ã€Œæ¶‰åŠæ–‡ä»¶ã€ã€Œä¾èµ–ä»»åŠ¡ã€ã€Œç›¸å…³è§„èŒƒã€å­—æ®µï¼Œç®€åŒ–ä»»åŠ¡è§†å›¾ï¼Œèšç„¦æ ¸å¿ƒä¿¡æ¯ã€‚

### 2.5 ä»£ç ç”Ÿæˆç»“æœé¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI ä»£ç å»ºè®®                              [åº”ç”¨å…¨éƒ¨]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  ğŸ“ services/payment/wechat.ts                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ + import { requestPayment } from '@/utils/wx';  â”‚ â”‚
â”‚  â”‚ +                                               â”‚ â”‚
â”‚  â”‚ + export async function prepayOrder(params: {  â”‚ â”‚
â”‚  â”‚ +   orderId: string;                           â”‚ â”‚
â”‚  â”‚ +   amount: number;                            â”‚ â”‚
â”‚  â”‚ + }) {                                         â”‚ â”‚
â”‚  â”‚ +   try {                                      â”‚ â”‚
â”‚  â”‚ +     const res = await api.createPrepayOrder( â”‚ â”‚
â”‚  â”‚ +       params                                 â”‚ â”‚
â”‚  â”‚ +     );                                       â”‚ â”‚
â”‚  â”‚ +     await requestPayment(res.payParams);     â”‚ â”‚
â”‚  â”‚ +     return { success: true };                â”‚ â”‚
â”‚  â”‚ +   } catch (error) {                          â”‚ â”‚
â”‚  â”‚ +     handlePaymentError(error);               â”‚ â”‚
â”‚  â”‚ +     return { success: false, error };        â”‚ â”‚
â”‚  â”‚ +   }                                          â”‚ â”‚
â”‚  â”‚ + }                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [åº”ç”¨æ­¤æ–‡ä»¶] [å¿½ç•¥]                                  â”‚
â”‚                                                       â”‚
â”‚  ğŸ“ pages/order-detail/prepay-modal/index.ts          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   async onPrepayTap() {                        â”‚ â”‚
â”‚  â”‚ +   this.setData({ loading: true });           â”‚ â”‚
â”‚  â”‚ +   const { success } = await prepayOrder({    â”‚ â”‚
â”‚  â”‚ +     orderId: this.data.orderId,              â”‚ â”‚
â”‚  â”‚ +     amount: this.data.estimateAmount,        â”‚ â”‚
â”‚  â”‚ +   });                                        â”‚ â”‚
â”‚  â”‚ +   this.setData({ loading: false });          â”‚ â”‚
â”‚  â”‚ +   if (success) {                             â”‚ â”‚
â”‚  â”‚ +     this.triggerEvent('success');            â”‚ â”‚
â”‚  â”‚ +   }                                          â”‚ â”‚
â”‚  â”‚   }                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [åº”ç”¨æ­¤æ–‡ä»¶] [å¿½ç•¥]                                  â”‚
â”‚                                                       â”‚
â”‚  ğŸ’¡ AI è¯´æ˜                                           â”‚
â”‚  åŸºäºå›¢é˜Ÿçš„æ”¯ä»˜æ¥å£è§„èŒƒï¼Œå·²æ·»åŠ  loading çŠ¶æ€ç®¡ç†å’Œ    â”‚
â”‚  ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ã€‚å»ºè®®åç»­å¢åŠ æ”¯ä»˜ç»“æœçš„åŸ‹ç‚¹ä¸ŠæŠ¥ã€‚     â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 æŠ¥é”™åˆ†æé¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” JS æŠ¥é”™åˆ†æ                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  âŒ é”™è¯¯ä¿¡æ¯                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TypeError: Cannot read property 'orderId' of   â”‚ â”‚
â”‚  â”‚ undefined                                       â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ at prepayOrder (wechat.ts:15:23)               â”‚ â”‚
â”‚  â”‚ at onPrepayTap (index.ts:42:18)                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  ğŸ“ å®šä½ç»“æœ                                          â”‚
â”‚  æ–‡ä»¶: services/payment/wechat.ts                     â”‚
â”‚  è¡Œå·: 15                                             â”‚
â”‚  [è·³è½¬åˆ°æºç ]                                         â”‚
â”‚                                                       â”‚
â”‚  ğŸ” æ ¹å› åˆ†æ                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ params å‚æ•°åœ¨æŸäº›è°ƒç”¨åœºæ™¯ä¸‹å¯èƒ½ä¸º undefinedï¼Œ   â”‚ â”‚
â”‚  â”‚ éœ€è¦åœ¨å‡½æ•°å…¥å£å¤„å¢åŠ å‚æ•°æ ¡éªŒã€‚                   â”‚ â”‚
â”‚  â”‚                                                 â”‚ â”‚
â”‚  â”‚ ç±»ä¼¼é—®é¢˜å†å²è®°å½•ï¼š                               â”‚ â”‚
â”‚  â”‚ - #BUG-2024-001: æ”¯ä»˜å‚æ•°æœªæ ¡éªŒå¯¼è‡´å´©æºƒ         â”‚ â”‚
â”‚  â”‚ - æ²»ç†æ–¹æ¡ˆ: ç»Ÿä¸€ä½¿ç”¨ validateParams å·¥å…·å‡½æ•°    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  ğŸ’¡ ä¿®å¤å»ºè®®                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ export async function prepayOrder(params) {    â”‚ â”‚
â”‚  â”‚ +  if (!params?.orderId) {                     â”‚ â”‚
â”‚  â”‚ +    console.error('prepayOrder: invalid');    â”‚ â”‚
â”‚  â”‚ +    return { success: false };                â”‚ â”‚
â”‚  â”‚ +  }                                           â”‚ â”‚
â”‚  â”‚    // ... existing code                        â”‚ â”‚
â”‚  â”‚ }                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                       â”‚
â”‚  [åº”ç”¨ä¿®å¤] [ç”Ÿæˆæ²»ç†è®°å½•]                            â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æ•°æ®ç»“æ„è®¾è®¡

### 3.1 éœ€æ±‚æ•°æ®ç»“æ„

```typescript
// types/requirement.ts

/** åŸå§‹éœ€æ±‚ä¿¡æ¯ï¼ˆä» TAPD è·å–ï¼‰ */
interface RawRequirement {
  id: string;                    // TAPD éœ€æ±‚ ID
  title: string;                 // éœ€æ±‚æ ‡é¢˜
  description: string;           // éœ€æ±‚æè¿°ï¼ˆåŸå§‹æ–‡æœ¬ï¼‰
  acceptanceCriteria: string;    // éªŒæ”¶æ ‡å‡†ï¼ˆåŸå§‹æ–‡æœ¬ï¼‰
  priority: 'P0' | 'P1' | 'P2';  // ä¼˜å…ˆçº§
  status: string;                // çŠ¶æ€
  creator: string;               // åˆ›å»ºäºº
  assignee: string;              // å¤„ç†äºº
  createTime: string;            // åˆ›å»ºæ—¶é—´
  updateTime: string;            // æ›´æ–°æ—¶é—´
}

/** ç»“æ„åŒ–éœ€æ±‚ä¿¡æ¯ï¼ˆæ¨¡å‹è§£æåï¼‰ */
interface StructuredRequirement {
  id: string;                    // å…³è”çš„åŸå§‹éœ€æ±‚ ID
  
  /** ä¸šåŠ¡èƒŒæ™¯ */
  background: {
    summary: string;             // èƒŒæ™¯æ¦‚è¿°
    currentProblem: string;      // å½“å‰é—®é¢˜
    expectedOutcome: string;     // æœŸæœ›ç»“æœ
  };
  
  /** ä¸šåŠ¡ç›®æ ‡ */
  objectives: Array<{
    description: string;         // ç›®æ ‡æè¿°
    metric?: string;             // é‡åŒ–æŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰
  }>;
  
  /** åŠŸèƒ½ç‚¹åˆ—è¡¨ */
  features: Array<{
    id: string;                  // åŠŸèƒ½ç‚¹ ID
    name: string;                // åŠŸèƒ½åç§°
    description: string;         // åŠŸèƒ½æè¿°
    subFeatures?: string[];      // å­åŠŸèƒ½ç‚¹
    priority: 'must' | 'should' | 'could';  // ä¼˜å…ˆçº§
  }>;
  
  /** è¾¹ç•Œä¸å¼‚å¸¸æƒ…å†µ */
  edgeCases: Array<{
    scenario: string;            // åœºæ™¯æè¿°
    expectedBehavior: string;    // é¢„æœŸè¡Œä¸º
    priority: 'high' | 'medium' | 'low';
  }>;
  
  /** éªŒæ”¶æ ‡å‡†ï¼ˆç»“æ„åŒ–ï¼‰ */
  acceptanceCriteria: Array<{
    id: string;                  // éªŒæ”¶é¡¹ ID
    description: string;         // éªŒæ”¶æè¿°
    testMethod?: string;         // æµ‹è¯•æ–¹æ³•
    checked: boolean;            // æ˜¯å¦å·²éªŒæ”¶
  }>;
  
  /** å…ƒä¿¡æ¯ */
  meta: {
    parsedAt: string;            // è§£ææ—¶é—´
    parsedBy: string;            // è§£ææ¨¡å‹
    version: number;             // ç‰ˆæœ¬å·
  };
}
```

### 3.2 ä»»åŠ¡æ•°æ®ç»“æ„

```typescript
// types/task.ts

/** ä»»åŠ¡çŠ¶æ€ */
type TaskStatus = 
  | 'pending'      // å¾…å¼€å§‹
  | 'in_progress'  // å¼€å‘ä¸­
  | 'completed';   // å·²å®Œæˆ

/** ä»»åŠ¡çŠ¶æ€æ˜¾ç¤ºæ–‡æœ¬ */
const TaskStatusText: Record<TaskStatus, string> = {
  pending: 'å¾…å¼€å§‹',
  in_progress: 'å¼€å‘ä¸­',
  completed: 'å·²å®Œæˆ',
};

/** ä»»åŠ¡ä¿¡æ¯ï¼ˆç²¾ç®€ç‰ˆï¼‰ */
interface Task {
  id: string;                    // ä»»åŠ¡ ID (T1, T2...)
  requirementId: string;         // å…³è”éœ€æ±‚ ID
  
  /** åŸºæœ¬ä¿¡æ¯ */
  title: string;                 // ä»»åŠ¡æ ‡é¢˜
  description: string;           // ä»»åŠ¡æè¿°
  status: TaskStatus;            // ä»»åŠ¡çŠ¶æ€
  statusText: string;            // çŠ¶æ€æ˜¾ç¤ºæ–‡æœ¬
  
  /** éªŒæ”¶ç‚¹ */
  checkpoints: Array<{
    id: string;
    description: string;
    checked: boolean;
  }>;
}

/** ä»»åŠ¡åˆ—è¡¨ */
interface TaskList {
  requirementId: string;
  tasks: Task[];
}
```

> **å˜æ›´è¯´æ˜**ï¼šç§»é™¤äº† `relatedFiles`ã€`dependencies`ã€`relatedSpecs`ã€`aiAssistHistory` ç­‰å†—ä½™å­—æ®µï¼Œç®€åŒ–ä»»åŠ¡æ•°æ®ç»“æ„ã€‚

### 3.3 ä¸Šä¸‹æ–‡æ•°æ®ç»“æ„

```typescript
// types/context.ts

/** ä»£ç ä¸Šä¸‹æ–‡ï¼ˆç®€åŒ–ç‰ˆï¼‰ */
interface CodeContext {
  /** å½“å‰æ–‡ä»¶ */
  currentFile?: {
    path: string;
    content: string;
    language: string;
    selectedText?: string;
  };
  
  /** é¡¹ç›®ä¿¡æ¯ */
  projectInfo: {
    rootPath: string;
    framework: string;           // react / vue / miniprogram
  };
}

/** çŸ¥è¯†åº“ä¸Šä¸‹æ–‡ï¼ˆç®€åŒ–ç‰ˆï¼‰ */
interface KnowledgeContext {
  /** ä»£ç è§„èŒƒ */
  codeSpecs: Array<{
    id: string;
    title: string;
    content: string;
  }>;
  
  /** å†å²æ²»ç†ç»éªŒ */
  historicalFixes: Array<{
    id: string;
    errorType: string;
    solution: string;
  }>;
}

/** å®Œæ•´ä¸Šä¸‹æ–‡ï¼ˆå‘é€ç»™æ¨¡å‹ï¼‰ */
interface FullContext {
  /** éœ€æ±‚ä¸Šä¸‹æ–‡ */
  requirement: StructuredRequirement;
  
  /** å½“å‰ä»»åŠ¡ */
  currentTask: Task;
  
  /** ä»£ç ä¸Šä¸‹æ–‡ */
  code: CodeContext;
  
  /** çŸ¥è¯†åº“ä¸Šä¸‹æ–‡ */
  knowledge: KnowledgeContext;
  
  /** ç”¨æˆ·æŒ‡ä»¤ */
  userInstruction: string;
  
  /** æœŸæœ›è¾“å‡ºç±»å‹ */
  expectedOutput: 'code' | 'review' | 'analysis';
}
```

---

## å››ã€æ ¸å¿ƒæ¨¡å—é…ç½®

> **è¯´æ˜**ï¼šæœ¬ç« èŠ‚ä»…å±•ç¤ºæ¨¡å—é…ç½®å’Œ Prompt æ¨¡æ¿å®šä¹‰ï¼Œå…·ä½“å®ç°é€»è¾‘è¯·å‚è€ƒåŸå‹äº¤äº’ã€‚

### 4.1 éœ€æ±‚ç®¡ç†æ¨¡å—

```typescript
// modules/requirement/config.ts

/**
 * éœ€æ±‚ç®¡ç†æ¨¡å—ä¾èµ–
 */
interface RequirementModuleDeps {
  tapdService: TapdService;
  modelService: ModelService;
  storage: StorageService;
}

/**
 * éœ€æ±‚è§£æ Prompt æ¨¡æ¿
 */
const PARSE_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªéœ€æ±‚åˆ†æä¸“å®¶ï¼Œè´Ÿè´£å°†äº§å“éœ€æ±‚è½¬åŒ–ä¸ºç»“æ„åŒ–çš„å¼€å‘ä»»åŠ¡æè¿°ã€‚

## è¾“å…¥
### åŸå§‹éœ€æ±‚
æ ‡é¢˜: ${requirement.title}
æè¿°: ${requirement.description}
éªŒæ”¶æ ‡å‡†: {acceptanceCriteria}

### ç›¸å…³ä¸šåŠ¡è§„èŒƒ
{businessSpecs}

## ä»»åŠ¡
è¯·å°†ä¸Šè¿°éœ€æ±‚è§£æä¸ºç»“æ„åŒ–æ ¼å¼ï¼Œè¾“å‡º JSONã€‚

## è¾“å‡ºæ ¼å¼
{
  "background": {
    "summary": "èƒŒæ™¯æ¦‚è¿°",
    "currentProblem": "å½“å‰é—®é¢˜",
    "expectedOutcome": "æœŸæœ›ç»“æœ"
  },
  "objectives": [
    { "description": "ç›®æ ‡æè¿°", "metric": "é‡åŒ–æŒ‡æ ‡" }
  ],
  "features": [
    {
      "id": "F1",
      "name": "åŠŸèƒ½åç§°",
      "description": "åŠŸèƒ½æè¿°",
      "subFeatures": ["å­åŠŸèƒ½1", "å­åŠŸèƒ½2"],
      "priority": "must|should|could"
    }
  ],
  "edgeCases": [
    {
      "scenario": "åœºæ™¯æè¿°",
      "expectedBehavior": "é¢„æœŸè¡Œä¸º",
      "priority": "high|medium|low"
    }
  ],
  "acceptanceCriteria": [
    { "id": "AC1", "description": "éªŒæ”¶æè¿°", "testMethod": "æµ‹è¯•æ–¹æ³•" }
  ]
}

## æ³¨æ„äº‹é¡¹
1. åŠŸèƒ½ç‚¹è¦å…·ä½“å¯æ‰§è¡Œï¼Œä¸è¦å¤ªæŠ½è±¡
2. è¾¹ç•Œæƒ…å†µè¦è¦†ç›–å¸¸è§å¼‚å¸¸åœºæ™¯
3. éªŒæ”¶æ ‡å‡†è¦å¯æµ‹è¯•ã€å¯é‡åŒ–
`;
```

### 4.2 ä»»åŠ¡ç®¡ç†æ¨¡å—

```typescript
// modules/task/config.ts

/**
 * ä»»åŠ¡ç®¡ç†æ¨¡å—ä¾èµ–
 */
interface TaskModuleDeps {
  modelService: ModelService;
  storage: StorageService;
}

/**
 * ä»»åŠ¡æ‹†è§£ Prompt æ¨¡æ¿
 */
const TASK_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±å‰ç«¯å¼€å‘ï¼Œè´Ÿè´£å°†éœ€æ±‚æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„å¼€å‘ä»»åŠ¡ã€‚

## è¾“å…¥
### ç»“æ„åŒ–éœ€æ±‚
\${JSON.stringify(requirement, null, 2)}

### é¡¹ç›®ç»“æ„
\${JSON.stringify(projectStructure, null, 2)}

## ä»»åŠ¡
è¯·å°†éœ€æ±‚æ‹†è§£ä¸ºå…·ä½“çš„å¼€å‘ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡åº”è¯¥ï¼š
1. ç²’åº¦é€‚ä¸­ï¼Œ1-4å°æ—¶å¯å®Œæˆ
2. æœ‰æ¸…æ™°çš„éªŒæ”¶æ ‡å‡†

## è¾“å‡ºæ ¼å¼
[
  {
    "id": "T1",
    "title": "ä»»åŠ¡æ ‡é¢˜",
    "description": "ä»»åŠ¡æè¿°",
    "checkpoints": [
      { "description": "éªŒæ”¶ç‚¹1" },
      { "description": "éªŒæ”¶ç‚¹2" }
    ]
  }
]
`;

/**
 * ä»»åŠ¡æ‹†è§£è¾“å‡ºç±»å‹
 */
interface TaskSplitOutput {
  id: string;
  title: string;
  description: string;
  checkpoints: { description: string }[];
}
```

### 4.3 ä»£ç è¾…åŠ©æ¨¡å—

```typescript
// modules/codeAssist/config.ts

/**
 * ä»£ç è¾…åŠ©æ¨¡å—ä¾èµ–
 */
interface CodeAssistModuleDeps {
  modelService: ModelService;
  taskManager: TaskManager;
}

/**
 * ä»£ç ç”Ÿæˆ Prompt æ¨¡æ¿
 */
const CODE_GENERATE_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±å‰ç«¯å¼€å‘ï¼Œæ ¹æ®éœ€æ±‚å’Œä»»åŠ¡ä¸Šä¸‹æ–‡ç”Ÿæˆä»£ç ã€‚

## å½“å‰éœ€æ±‚
\${JSON.stringify(context.requirement, null, 2)}

## å½“å‰ä»»åŠ¡
\${JSON.stringify(context.currentTask, null, 2)}

## å½“å‰æ–‡ä»¶
è·¯å¾„: \${context.code.currentFile?.path || 'æ— '}
å†…å®¹:
\`\`\`\${context.code.currentFile?.language || ''}
\${context.code.currentFile?.content || ''}
\`\`\`

## ç”¨æˆ·æŒ‡ä»¤
\${context.userInstruction}

## è¾“å‡ºè¦æ±‚
è¯·è¾“å‡ºä»£ç ä¿®æ”¹å»ºè®®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
\`\`\`json
[
  {
    "filePath": "æ–‡ä»¶è·¯å¾„",
    "type": "insert|replace|create",
    "description": "ä¿®æ”¹è¯´æ˜",
    "code": "ä»£ç å†…å®¹"
  }
]
\`\`\`

## æ³¨æ„äº‹é¡¹
1. éµå¾ªå›¢é˜Ÿä»£ç è§„èŒƒ
2. æ·»åŠ å¿…è¦çš„ç±»å‹å£°æ˜
3. å¤„ç†å¼‚å¸¸æƒ…å†µ
4. ä¸è¦çœç•¥ä»£ç ï¼Œè¾“å‡ºå®Œæ•´å®ç°
`;

/**
 * ä»£ç æ£€æŸ¥ Prompt æ¨¡æ¿
 */
const CODE_REVIEW_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œæ ¹æ®å›¢é˜Ÿè§„èŒƒæ£€æŸ¥ä»£ç è´¨é‡ã€‚

## å½“å‰æ–‡ä»¶
è·¯å¾„: \${context.code.currentFile?.path}
\`\`\`\${context.code.currentFile?.language}
\${context.code.currentFile?.content}
\`\`\`

## æ£€æŸ¥ç»´åº¦
1. å‘½åè§„èŒƒ
2. é”™è¯¯å¤„ç†
3. ç±»å‹å®‰å…¨
4. åŸ‹ç‚¹å®Œæ•´æ€§
5. æ€§èƒ½é—®é¢˜
6. å®‰å…¨é£é™©

## è¾“å‡ºæ ¼å¼
\`\`\`json
[
  {
    "severity": "error|warning|info",
    "category": "å‘½å|é”™è¯¯å¤„ç†|ç±»å‹|åŸ‹ç‚¹|æ€§èƒ½|å®‰å…¨",
    "line": è¡Œå·,
    "message": "é—®é¢˜æè¿°",
    "suggestion": "ä¿®å¤å»ºè®®"
  }
]
\`\`\`
`;

/**
 * ä»£ç å»ºè®®è¾“å‡ºç±»å‹
 */
interface CodeSuggestion {
  filePath: string;
  type: 'insert' | 'replace' | 'create';
  description: string;
  code: string;
}

/**
 * ä»£ç æ£€æŸ¥ç»“æœç±»å‹
 */
interface CodeReviewResult {
  severity: 'error' | 'warning' | 'info';
  category: string;
  line: number;
  message: string;
  suggestion: string;
}
```

### 4.4 æŠ¥é”™æ²»ç†æ¨¡å—

```typescript
// modules/errorFix/config.ts

/**
 * æŠ¥é”™æ²»ç†æ¨¡å—ä¾èµ–
 */
interface ErrorFixModuleDeps {
  modelService: ModelService;
  knowledgeBase: KnowledgeBaseService;
  sourceMapService: SourceMapService;
}

/**
 * é”™è¯¯åˆ†æ Prompt æ¨¡æ¿
 */
const ERROR_ANALYZE_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±å‰ç«¯å¼€å‘ï¼Œè´Ÿè´£åˆ†æå’Œè¯Šæ–­ JS è¿è¡Œæ—¶é”™è¯¯ã€‚

## é”™è¯¯ä¿¡æ¯
\`\`\`
\${errorInfo}
\`\`\`

## æºç ä¸Šä¸‹æ–‡
\`\`\`typescript
\${sourceContext}
\`\`\`

## å†å²ç±»ä¼¼é”™è¯¯æ²»ç†ç»éªŒ
\${historicalFixes.length > 0
  ? historicalFixes.map(f => \`### \${f.errorType}\\n- æ ¹å› : \${f.rootCause}\\n- è§£å†³æ–¹æ¡ˆ: \${f.solution}\`).join('\\n')
  : 'æ— å†å²è®°å½•'
}

## è¾“å‡ºè¦æ±‚
è¯·åˆ†ææ­¤é”™è¯¯å¹¶è¾“å‡ºï¼š
\`\`\`json
{
  "errorType": "é”™è¯¯ç±»å‹",
  "rootCause": "æ ¹æœ¬åŸå› åˆ†æ",
  "debugSteps": ["è°ƒè¯•æ­¥éª¤1", "è°ƒè¯•æ­¥éª¤2"],
  "suggestedFix": "ä¿®å¤å»ºè®®",
  "fixCode": "ä¿®å¤ä»£ç ï¼ˆå¦‚æœé€‚ç”¨ï¼‰",
  "preventionTips": ["é¢„é˜²æªæ–½1", "é¢„é˜²æªæ–½2"]
}
\`\`\`
`;

/**
 * æ²»ç†è®°å½•ç”Ÿæˆ Prompt æ¨¡æ¿
 */
const FIX_RECORD_PROMPT_TEMPLATE = `
## è§’è‰²
ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–‡æ¡£ç¼–å†™ä¸“å®¶ï¼Œè´Ÿè´£ç”Ÿæˆæ ‡å‡†åŒ–çš„é”™è¯¯æ²»ç†è®°å½•ã€‚

## é”™è¯¯ä¿¡æ¯
\${analysisResult.originalError}

## æ ¹å› åˆ†æ
\${analysisResult.rootCause}

## ä¿®å¤æ–¹æ¡ˆ
\${analysisResult.suggestedFix}

## ä¿®å¤ä»£ç  Diff
\`\`\`diff
\${fixDiff}
\`\`\`

## è¾“å‡ºæ ¼å¼
è¯·æŒ‰ä»¥ä¸‹æ¨¡æ¿è¾“å‡ºæ²»ç†è®°å½•ï¼š

### ç°è±¡
[æè¿°é”™è¯¯ç°è±¡]

### æ ¹å› 
[è¯¦ç»†åˆ†ææ ¹æœ¬åŸå› ]

### ä¿®å¤æ–¹å¼
[å…·ä½“çš„ä¿®å¤æ–¹æ³•å’Œä»£ç æ”¹åŠ¨]

### é˜²å†å‘æªæ–½
[å¦‚ä½•é¿å…ç±»ä¼¼é—®é¢˜å†æ¬¡å‘ç”Ÿ]
`;

/**
 * é”™è¯¯åˆ†æç»“æœç±»å‹
 */
interface ErrorAnalysisResult {
  errorType: string;
  rootCause: string;
  debugSteps: string[];
  suggestedFix: string;
  fixCode?: string;
  preventionTips: string[];
}

/**
 * æ²»ç†è®°å½•ç±»å‹
 */
interface FixRecord {
  id: string;
  errorType: string;
  phenomenon: string;
  rootCause: string;
  fixMethod: string;
  prevention: string;
  createdAt: string;
  diff: string;
}
```

---

## äº”ã€æœåŠ¡å±‚æ¥å£è®¾è®¡

> **è¯´æ˜**ï¼šæœ¬ç« èŠ‚ä»…å±•ç¤ºæœåŠ¡æ¥å£å®šä¹‰ï¼Œå…·ä½“å®ç°è¯·å‚è€ƒå®é™…ä»£ç ã€‚

### 5.1 TAPD æœåŠ¡

```typescript
// services/TapdService.ts

interface TapdService {
  /** è·å–éœ€æ±‚è¯¦æƒ… */
  getRequirement(id: string): Promise<RawRequirement>;
  
  /** æœç´¢éœ€æ±‚ */
  searchRequirements(keyword: string): Promise<RawRequirement[]>;
}
```

### 5.2 æ¨¡å‹æœåŠ¡

```typescript
// services/ModelService.ts

interface ModelCallParams {
  prompt: string;
  expectedOutput: string;
  temperature?: number;
}

interface ModelService {
  /** è°ƒç”¨æ¨¡å‹ */
  call(params: ModelCallParams): Promise<string>;
}
```

### 5.3 çŸ¥è¯†åº“æœåŠ¡

```typescript
// services/KnowledgeBaseService.ts

interface Spec {
  id: string;
  title: string;
  content: string;
  category: string;
}

interface KnowledgeBaseService {
  /** æœç´¢ä¸šåŠ¡è§„èŒƒ */
  searchBusinessSpecs(keywords: string[]): Promise<Spec[]>;
  
  /** æœç´¢ä»£ç è§„èŒƒ */
  searchCodeSpecs(keywords: string[]): Promise<Spec[]>;
  
  /** æœç´¢ç±»ä¼¼é”™è¯¯çš„å†å²æ²»ç†è®°å½• */
  searchSimilarErrors(errorType: string, message: string): Promise<HistoricalFix[]>;
  
  /** ä¿å­˜æ²»ç†è®°å½• */
  saveFixRecord(record: FixRecord): Promise<void>;
}
```

---

## å…­ã€æ’ä»¶å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ ID | è¯´æ˜ |
|---------|------|
| `aiHelper.bindRequirement` | ç»‘å®š TAPD éœ€æ±‚ |
| `aiHelper.parseRequirement` | è§£æéœ€æ±‚ä¸ºç»“æ„åŒ–æ ¼å¼ |
| `aiHelper.generateTasks` | ç”Ÿæˆä»»åŠ¡æ‹†è§£ |
| `aiHelper.startTask` | å¼€å§‹ä»»åŠ¡ |
| `aiHelper.completeTask` | å®Œæˆä»»åŠ¡ |
| `aiHelper.generateCode` | è°ƒç”¨ AI ç”Ÿæˆä»£ç  |
| `aiHelper.reviewCode` | è°ƒç”¨ AI æ£€æŸ¥ä»£ç  |
| `aiHelper.analyzeError` | åˆ†ææŠ¥é”™ |

---

## ä¸ƒã€é…ç½®é¡¹

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `aiHelper.tapdToken` | string | "" | TAPD API Token |
| `aiHelper.modelType` | enum | "claude" | æ¨¡å‹ç±»å‹: claude / codebuddy / internal |
| `aiHelper.modelEndpoint` | string | "" | å†…éƒ¨æ¨¡å‹æœåŠ¡åœ°å€ |
| `aiHelper.knowledgeBaseUrl` | string | "" | çŸ¥è¯†åº“æœåŠ¡åœ°å€ |
| `aiHelper.maxContextSize` | number | 50000 | æœ€å¤§ä¸Šä¸‹æ–‡å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰ |

---

## å…«ã€å¼€å‘æ’æœŸå»ºè®®

| é˜¶æ®µ | å‘¨æœŸ | å†…å®¹ | äº¤ä»˜ç‰© |
|------|------|------|--------|
| **é˜¶æ®µä¸€** | 2å‘¨ | æ’ä»¶æ¡†æ¶ + éœ€æ±‚ç»‘å®š + ç»“æ„åŒ–è§£æ | å¯ç»‘å®šéœ€æ±‚å¹¶ç”Ÿæˆç»“æ„åŒ–æè¿° |
| **é˜¶æ®µäºŒ** | 2å‘¨ | ä»»åŠ¡ç®¡ç† + ä¸Šä¸‹æ–‡æ”¶é›† | ä»»åŠ¡æ‹†è§£ã€çŠ¶æ€ç®¡ç†ã€ä¸Šä¸‹æ–‡æ”¶é›† |
| **é˜¶æ®µä¸‰** | 2å‘¨ | ä»£ç ç”Ÿæˆ + ä»£ç æ£€æŸ¥ | AI è¾…åŠ©ç”Ÿæˆä»£ç ã€è§„èŒƒæ£€æŸ¥ |
| **é˜¶æ®µå››** | 2å‘¨ | æŠ¥é”™åˆ†æ + æ²»ç†è®°å½• | æŠ¥é”™è¯Šæ–­ã€æ²»ç†è®°å½•ç”Ÿæˆ |
| **é˜¶æ®µäº”** | 1å‘¨ | éªŒæ”¶æ¸…å• + é›†æˆæµ‹è¯• | å®Œæ•´åŠŸèƒ½ã€æ–‡æ¡£ |

**æ€»è®¡ï¼šçº¦ 9 å‘¨**

---

å¦‚éœ€è¿›ä¸€æ­¥ç»†åŒ–æŸä¸ªæ¨¡å—ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼
